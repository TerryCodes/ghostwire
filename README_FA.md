# ฺฏูุณุชโูุงุฑ - ุชููู ูุนฺฉูุณ ุถุฏ ุณุงูุณูุฑ

**[๐ English](README.md)**

ฺฏูุณุชโูุงุฑ ฺฉ ุณุณุชู ุชููู ูุนฺฉูุณ ูุจุชู ุจุฑ WebSocket ุงุณุช ฺฉู ุจู ฺฉุงุฑุจุฑุงู ุฏุฑ ฺฉุดูุฑูุง ุฏุงุฑุง ุณุงูุณูุฑ ฺฉูฺฉ ูโฺฉูุฏ ุชุง ุจู ุงูุชุฑูุช ุขุฒุงุฏ ุฏุณุชุฑุณ ูพุฏุง ฺฉููุฏ. ุงู ุณุณุชู ุงุฒ ุงุชุตุงูุงุช WebSocket ุงูู ุฑู TLS ุงุณุชูุงุฏู ูโฺฉูุฏ ฺฉู ุชุดุฎุต ู ูุณุฏูุฏ ฺฉุฑุฏู ุขู ุฏุดูุงุฑ ุงุณุช.

## ูฺฺฏโูุง

- **ูพุดุชุจุงู ุงุฒ ูพุฑูุชฺฉูโูุง ูุชุนุฏุฏ** - WebSocketุ HTTP/2 ู gRPC

- **ุงุญุฑุงุฒ ููุช ุฑูุฒฺฏุฐุงุฑ ุดุฏู ุจุง RSA** - ุชูฺฉู ุจุฑุง ูพุฑูฺฉุณโูุง ุฎุงุชููโุฏููุฏู TLS (ูุงููุฏ CloudFlare) ูุงูุฑุฆ ุงุณุช

- **ุฑูุฒฺฏุฐุงุฑ ุณุฑุชุงุณุฑ AES-256-GCM** - ุชูุงู ุฏุงุฏูโูุง ุชููู ุจุง ฺฉูุฏูุง ุชุตุงุฏู ฒตถ ุจุช ุฑูุฒฺฏุฐุงุฑ ุดุฏูโุงูุฏ

- **ูุนูุงุฑ ุชููู ูุนฺฉูุณ** - ฺฉูุงูุช ุจู ุณุฑูุฑ ูุชุตู ูโุดูุฏ (ูุณุฏูุฏุณุงุฒ ุฎุฑูุฌ ุฑุง ุฏูุฑ ูโุฒูุฏ)

- **ุฌุฑุงู ุฏูุทุฑูู** - ฺฉ ุงุชุตุงู ูุฏุงูู ุฑู TLS

- **ูุฏุงุช ูพูุฑุช TCP ุงูุนุทุงูโูพุฐุฑ** - ูุญุฏูุฏู ูพูุฑุชุ ุงุชุตุงู IPุ ูฺฏุงุดุชโูุง ุณูุงุฑุด

- **ูุจุถ ุฏุงุฎู** - ูฺฏูุฏุงุดุช ุฒูุฏู ุฏุฑ ูุงู ุงูุชูุงู ู ูุงู ุจุฑูุงูู

- **ุณุงุฒฺฏุงุฑ ุจุง CloudFlare** - ุจุง ูพุฑูฺฉุณโูุง ุฎุงุชููโุฏููุฏู TLS (ุจุง WebSocket/HTTP/2) ฺฉุงุฑ ูโฺฉูุฏ

- **ูพูู ูุฏุฑุช ูุจ** - ูพุงุด ุณุณุชู ุจูุงุฏุฑูฺฏุ ุชูุธู ุชูููุ ูุงฺฏโูุงุ ฺฉูุชุฑู ุณุฑูุณ

- **ูุนฺฉูุณโูพุฑูฺฉุณ nginx** - ุฑุงูโุงูุฏุงุฒ ุขูุงุฏู ุชููุฏ ุจุง Let's Encrypt

- **ูุงูโูุง ุจุงูุฑ ฺฉุงููพุงู ุดุฏู** - Linux amd64 (ุณุงุฒฺฏุงุฑ ุจุง Ubuntu 22.04+)

- **ุณุฑูุณโูุง systemd** - ุดุฑูุน ุฎูุฏฺฉุงุฑุ ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏุ ูุงฺฏโููุณ

- **ุจูโุฑูุฒุฑุณุงู ุฎูุฏฺฉุงุฑ** - ุจูโุฑูุฒุฑุณุงู ุฎูุฏฺฉุงุฑ ูุงู ุจุงูุฑ ุงุฒ ุทุฑู ุงูุชุดุงุฑูุง GitHub

- **ูุตุจ ุขุณุงู** - ุงุณฺฉุฑูพุชโูุง ุฑุงูโุงูุฏุงุฒ ฺฉ ุฏุณุชูุฑ ุจุง ุชูุธูุงุช ุชุนุงูู

## ุดุฑูุน ุณุฑุน

### ูุฑุญูู ฑ: ูุตุจ ุณุฑูุฑ (ฺฉุดูุฑ ุฏุงุฑุง ุณุงูุณูุฑ - ูุซูุงู ุงุฑุงู)

ุณุฑูุฑ ุฏุฑ ฺฉุดูุฑ ุฏุงุฑุง ุณุงูุณูุฑ ุจุง IP ุนููู ุงุฌุฑุง ูโุดูุฏ ฺฉู ูโุชูุงูุฏ ุงุชุตุงูุงุช ูุฑูุฏ ุฑุง ุฏุฑุงูุช ฺฉูุฏ.

```bash
wget https://github.com/frenchtoblerone54/ghostwire/releases/latest/download/install-server.sh -O install-server.sh
chmod +x install-server.sh
sudo ./install-server.sh
```

**ูฺฉุชู:** ุชูฺฉู ุงุญุฑุงุฒ ููุช ุฑุง ุฐุฎุฑู ฺฉูุฏ - ุจุฑุง ฺฉูุงูุช ุจู ุขู ูุงุฒ ุฏุงุฑุฏ!

### ูุฑุญูู ฒ: ูุตุจ ฺฉูุงูุช (ฺฉุดูุฑ ุจุฏูู ุณุงูุณูุฑ - ูุซูุงู ูููุฏุ ุขูุฑฺฉุง)

ฺฉูุงูุช ุฑู ฺฉ VPS ุฏุฑ ฺฉุดูุฑ ุจุฏูู ุณุงูุณูุฑ ุจุง ุฏุณุชุฑุณ ูุงูุญุฏูุฏ ุจู ุงูุชุฑูุช ุงุฌุฑุง ูโุดูุฏ.

```bash
wget https://github.com/frenchtoblerone54/ghostwire/releases/latest/download/install-client.sh -O install-client.sh
chmod +x install-client.sh
sudo ./install-client.sh
```

ูุงุฑุฏ ฺฉูุฏ:

- **ุขุฏุฑุณ ุณุฑูุฑ** ฺฉู ุจู ุณุฑูุฑ ุงุฑุงู ุดูุง ุงุดุงุฑู ูโฺฉูุฏ (ูุซูุงู `wss://iran-server.com/ws`)

- **ุชูฺฉู ุงุญุฑุงุฒ ููุช** ุงุฒ ุณุฑูุฑ

- ฺฉูุงูุช ุจู ุณุฑูุฑ ุงุฑุงู ูุชุตู ูโุดูุฏ

### ูุฑุญูู ณ: ุงุณุชูุงุฏู ุงุฒ ุชููู (ุฏุฑ ุงุฑุงู)

ฺฉุงุฑุจุฑุงู ุฏุฑ ุงุฑุงู ุจู ูพูุฑุชโูุง ูุญู ุณุฑูุฑ (ูุซูุงู `localhost:8080`) ูุชุตู ูโุดููุฏ ู ุชุฑุงูฺฉ ุงุฒ ุทุฑู ุชููู ุจู ฺฉูุงูุช NL ูุฏุงุช ูโุดูุฏ ฺฉู ุฏุฑุฎูุงุณุชโูุง ูุงูุน ุงูุชุฑูุช ุฑุง ุงูุฌุงู ูโุฏูุฏ.

## ูุณุชูุฏุงุช

- **[ุฑุงูููุง ูุตุจ](docs/installation.md)** - ุฏุณุชูุฑุงูุนููโูุง ุฏูู ูุตุจ ุจุฑุง ุณุฑูุฑ ู ฺฉูุงูุช

- **[ูุฑุฌุน ุชูุธูุงุช](docs/configuration.md)** - ฺฏุฒููโูุง ฺฉุงูู ุชูุธูุงุช

- **[ุนุจโุงุจ](docs/troubleshooting.md)** - ูุดฺฉูุงุช ุฑุงุฌ ู ุฑุงูโุญูโูุง

- **[ุงููุช](docs/security.md)** - ุฌุฒุฆุงุช ุฑูุฒูฺฏุงุฑ ู ููุงุญุธุงุช ุงููุช

## ูุนูุงุฑ

### ุชููู ูุนฺฉูุณ ุจุฑุง ุฏูุฑ ุฒุฏู ูุณุฏูุฏุณุงุฒ ุฎุฑูุฌ

ุจุฑุง ุณูุงุฑููุง ุทุฑุงุญ ุดุฏู ุงุณุช ฺฉู ฺฉุดูุฑูุง ุฏุงุฑุง ุณุงูุณูุฑ ุงุชุตุงูุงุช ุฎุฑูุฌ ุจู ุณุฑูุฑูุง ุฎุงุฑุฌ ุฑุง ูุณุฏูุฏ ูโฺฉููุฏ (ูุซูุงู ุงุฑุงู ุงุชุตุงูุงุช ุจู ูุจโุณุงุชโูุง ุจูโุงูููู ุฑุง ูุณุฏูุฏ ูโฺฉูุฏ).

#### ุฑุงูโุงูุฏุงุฒ:

- **ุณุฑูุฑ:** ุฏุฑ ฺฉุดูุฑ ุฏุงุฑุง ุณุงูุณูุฑ (ุงุฑุงู) ุจุง IP ุนููู ุงุฌุฑุง ูโุดูุฏ

- **ฺฉูุงูุช:** ุฏุฑ ฺฉุดูุฑ ุจุฏูู ุณุงูุณูุฑ (ูููุฏ) ุจุง ุฏุณุชุฑุณ ูุงูุญุฏูุฏ ุจู ุงูุชุฑูุช ุงุฌุฑุง ูโุดูุฏ

#### ฺุฑุง ุงู ฺฉุงุฑ ูโฺฉูุฏุ

- ุงุฑุงู ุงุชุตุงูุงุช ุฎุฑูุฌ ุจู ุณุฑูุฑูุง ุฎุงุฑุฌ ุฑุง ูุณุฏูุฏ ูโฺฉูุฏ

- ุงูุง ุณุฑูุฑ ุงุฑุงู IP ุนููู ุฏุงุฑุฏ ู ูโุชูุงูุฏ ุงุชุตุงูุงุช WebSocket ูุฑูุฏ ุฑุง ุฏุฑุงูุช ฺฉูุฏ

- ฺฉูุงูุช NL ุจู ุณุฑูุฑ ุงุฑุงู ูุชุตู ูโุดูุฏ (ูุฑูุฏ ุจู ุงุฑุงู = ูุฌุงุฒ โ)

- ูพุณ ุงุฒ ุจุฑูุฑุงุฑ ุชูููุ ุชุฑุงูฺฉ ุฏูุทุฑูู ุฌุฑุงู ูโุงุจุฏ

#### ุฌุฑุงู ุฏุงุฏูโูุง:

```
[ฺฉุงุฑุจุฑ ุฏุฑ ุงุฑุงู] โ [ุณุฑูุฑ localhost:8080] โ [ุณุฑูุฑ ุงุฑุงู]
       โ ุชููู WebSocket
[ฺฉูุงูุช NL] โ [ุงูุชุฑูุช: ูพูุฑุช 80/443]
```

#### ฺฏุงู ุจู ฺฏุงู:

ฑ. ฺฉูุงูุช (NL) ุงุชุตุงู WebSocket ุฑุง ุจู ุณุฑูุฑ (ุงุฑุงู) ุขุบุงุฒ ูโฺฉูุฏ

ฒ. ุณุฑูุฑ (ุงุฑุงู) ุฑู ูพูุฑุชโูุง ูุญู (ูุซูุงู 8080) ุจุฑุง ฺฉุงุฑุจุฑุงู ฺฏูุด ูโุฏูุฏ

ณ. ฺฉุงุฑุจุฑ ุฏุฑ ุงุฑุงู ุจู localhost:8080 ูุชุตู ูโุดูุฏ

ด. ุชุฑุงูฺฉ ุงุฒ ุทุฑู WebSocket ุจู ฺฉูุงูุช NL ุชููู ูโุดูุฏ

ต. ฺฉูุงูุช NL ุงุชุตุงู ูุงูุน ุจู ูุจโุณุงุชโูุง ูุณุฏูุฏ ุดุฏู ุจุฑูุฑุงุฑ ูโฺฉูุฏ

ถ. ูพุงุณุฎ ุงุฒ ุทุฑู ุชููู ุจู ฺฉุงุฑุจุฑ ุจุฑูโฺฏุฑุฏุฏ

CloudFlare/DNS: ุจู IP ุณุฑูุฑ ุงุฑุงู ุงุดุงุฑู ูโฺฉูุฏ (ุฌุง ฺฉู ุณุฑูุฑ WebSocket ุจุฑุง ุงุชุตุงูุงุช ฺฉูุงูุช ฺฏูุด ูโุฏูุฏ)

## ูุญู ูฺฏุงุดุช ูพูุฑุช

ุณุฑูุฑ ุชูุธูุงุช ูฺฏุงุดุช ูพูุฑุช ุงูุนุทุงูโูพุฐุฑ ุฑุง ูพุดุชุจุงู ูโฺฉูุฏ (ุณุฑูุฑ ฺฏูุด ูโุฏูุฏุ ฺฉูุงูุช ูุชุตู ูโุดูุฏ):

```toml
ports=[
    "443-600",              # ฺฏูุด ุฏุงุฏู ุฑู ุชูุงู ูพูุฑุชโูุง 443-600ุ ุงุฑุณุงู ุจู ููุงู ูพูุฑุช ุฏุฑ ุฑููุช
    "443-600:5201",         # ฺฏูุด ุฏุงุฏู ุฑู ุชูุงู ูพูุฑุชโูุง 443-600ุ ุงุฑุณุงู ููู ุจู ูพูุฑุช ุฑููุช 5201
    "443-600=1.1.1.1:5201", # ฺฏูุด ุฏุงุฏู ุฑู ุชูุงู ูพูุฑุชโูุง 443-600ุ ุงุฑุณุงู ููู ุจู 1.1.1.1:5201
    "443",                   # ฺฏูุด ุฏุงุฏู ุฑู ูพูุฑุช ูุญู 443ุ ุงุฑุณุงู ุจู ูพูุฑุช ุฑููุช 443
    "4000=5000",             # ฺฏูุด ุฏุงุฏู ุฑู ูพูุฑุช ูุญู 4000ุ ุงุฑุณุงู ุจู ูพูุฑุช ุฑููุช 5000
    "127.0.0.2:443=5201",    # ุงุชุตุงู ุจู 127.0.0.2:443ุ ุงุฑุณุงู ุจู ูพูุฑุช ุฑููุช 5201
    "443=1.1.1.1:5201",      # ฺฏูุด ุฏุงุฏู ุฑู ูพูุฑุช ูุญู 443ุ ุงุฑุณุงู ุจู 1.1.1.1:5201
    "127.0.0.2:443=1.1.1.1:5201", # ุงุชุตุงู ุจู 127.0.0.2:443ุ ุงุฑุณุงู ุจู 1.1.1.1:5201
]
```

## ุชูุธูุงุช

### ุชูุธูุงุช ุณุฑูุฑ (/etc/ghostwire/server.toml)

**ูฺฉุงู:** ฺฉุดูุฑ ุฏุงุฑุง ุณุงูุณูุฑ (ุงุฑุงู) - IP ุนููู ุฏุงุฑุฏุ ุจุฑุง ุงุชุตุงูุงุช ฺฉูุงูุช ฺฏูุด ูโุฏูุฏ

```toml
[server]
protocol="websocket"        # "websocket" (ูพุดโูุฑุถ)ุ "http2" ุง "grpc"
listen_host="0.0.0.0"
listen_port=8443
listen_backlog=4096         # ุนูู ุตู ฺฏูุด ุฏุงุฏู TCP
websocket_path="/ws"        # ููุท ุจุฑุง ูพุฑูุชฺฉู websocket ุงุณุชูุงุฏู ูโุดูุฏ
ping_interval=30            # ูุงุตูู ูพูฺฏ ุณุทุญ ุจุฑูุงูู (ุซุงูู)
ping_timeout=60             # ุชุงูโุงูุช ุงุชุตุงู (ุซุงูู)
ws_pool_enabled=true        # ูุนุงู ฺฉุฑุฏู ุงุณุชุฎุฑ ฺฉุงูุงู ูุฑุฒูุฏ (ูพุดโูุฑุถ: true)
ws_pool_children=8          # ุญุฏุงฺฉุซุฑ ฺฉุงูุงูโูุง WebSocket ููุงุฒ
ws_pool_min=2               # ุญุฏุงูู ฺฉุงูุงูโูุง ููุดู ูุชุตู (ูพุดโูุฑุถ: 2)
ws_pool_stripe=false        # ุฎุท ุฒุฏู ูพฺฉุชโูุง ุฏุฑ ฺฉุงูุงูโูุง (ูุงูพุงุฏุงุฑุ ูพุดโูุฑุถ: false)
udp_enabled=true            # ููฺูู ุจุฑุง UDP ุฑู ูพูุฑุชโูุง ุชููู ฺฏูุด ูโุฏูุฏ (ูพุดโูุฑุถ: true)
ws_send_batch_bytes=65536   # ุญุฏุงฺฉุซุฑ ุจุงุช ุฏุฑ ูุฑ ูุฑู WebSocket (ูพุดโูุฑุถ: 65536)
auto_update=true
update_check_interval=300
update_check_on_startup=true

[auth]
token="V1StGXR8_Z5jdHi6B-my"

[tunnels]
ports=["8080=80", "8443=443"]

[panel]
enabled=true
host="127.0.0.1"
port=9090
path="aBcDeFgHiJkLmNoPqRsT"
threads=4                  # ุฑุดุชูโูุง ฺฉุงุฑฺฏุฑ ุณุฑูุฑ HTTP

[logging]
level="info"
file="/var/log/ghostwire-server.log"
```

**ูพูู ูุฏุฑุช ูุจ:** ุณุฑูุฑ ุดุงูู ฺฉ ูพูู ูุฏุฑุช ุงุฎุชุงุฑ ูุจุชู ุจุฑ ูุจ ุจุฑุง ููุงุฑุฏ ุฒุฑ ุงุณุช:
- ูพุงุด ุจูุงุฏุฑูฺฏ ุณุณุชู (CPUุ RAMุ ุฏุณฺฉุ ูุตุฑู ุดุจฺฉู)
- ุชูุธู ู ูุฏุฑุช ุชููู
- ูุดุงูุฏู ูุงฺฏโูุง
- ฺฉูุชุฑู ุณุฑูุณ (ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ/ุชููู)
- ูุฑุงุด ุชูุธูุงุช

ูพูู ุฏุฑ `http://127.0.0.1:9090/{path}/` ุฏุฑ ุฏุณุชุฑุณ ุงุณุช ฺฉู `path` ฺฉ nanoid ุชุตุงุฏู ุงุณุช. ุฏุณุชุฑุณ ุจูโุตูุฑุช ูพุดโูุฑุถ ุจู localhost ูุญุฏูุฏ ุงุณุช. ูพุงุฑุงูุชุฑ `threads` (ูพุดโูุฑุถ: 4) ุชุนุฏุงุฏ ุฑุดุชูโูุง ฺฉุงุฑฺฏุฑ ุณุฑูุฑ HTTP ูพูู ุฑุง ฺฉูุชุฑู ูโฺฉูุฏ.

### ุชูุธูุงุช ฺฉูุงูุช (/etc/ghostwire/client.toml)

**ูฺฉุงู:** ฺฉุดูุฑ ุจุฏูู ุณุงูุณูุฑ (ูููุฏ) - ุจู ุณุฑูุฑ ูุชุตู ูโุดูุฏุ ุฏุฑุฎูุงุณุชโูุง ุงูุชุฑูุช ุฑุง ุงูุฌุงู ูโุฏูุฏ

```toml
[server]
protocol="websocket"        # "websocket" (ูพุดโูุฑุถ)ุ "http2" ุง "grpc"
url="wss://tunnel.example.com/ws"  # ุงุฒ wss:// ุจุฑุง websocketุ https:// ุจุฑุง http2/grpc ุงุณุชูุงุฏู ฺฉูุฏ
token="V1StGXR8_Z5jdHi6B-my"
ping_interval=30            # ูุงุตูู ูพูฺฏ ุณุทุญ ุจุฑูุงูู (ุซุงูู)
ping_timeout=60             # ุชุงูโุงูุช ุงุชุตุงู (ุซุงูู)
ws_send_batch_bytes=65536   # ุญุฏุงฺฉุซุฑ ุจุงุช ุฏุฑ ูุฑ ูุฑู WebSocket (ูพุดโูุฑุถ: 65536)
auto_update=true
update_check_interval=300
update_check_on_startup=true

[reconnect]
initial_delay=1
max_delay=60
multiplier=2

[cloudflare]
enabled=false
ips=[]
host=""
check_interval=300
max_connection_time=1740

[logging]
level="info"
file="/var/log/ghostwire-client.log"
```

### ุชูุธู ุจูโุฑูุฒุฑุณุงู ุฎูุฏฺฉุงุฑ

ูุฑ ุฏู ุณุฑูุฑ ู ฺฉูุงูุช ุงุฒ ุจูโุฑูุฒุฑุณุงู ุฎูุฏฺฉุงุฑ ุงุฒ ุทุฑู ุงูุชุดุงุฑูุง GitHub ูพุดุชุจุงู ูโฺฉููุฏ:

- **`auto_update`** (ูพุดโูุฑุถ: `true`): ูุนุงู/ุบุฑูุนุงู ฺฉุฑุฏู ุจูโุฑูุฒุฑุณุงู ุฎูุฏฺฉุงุฑ
- **`update_check_interval`** (ูพุดโูุฑุถ: `300`): ุซุงููโูุง ุจู ุจุฑุฑุณ ุจูโุฑูุฒุฑุณุงู
- **`update_check_on_startup`** (ูพุดโูุฑุถ: `true`): ุจุฑุฑุณ ุจูโุฑูุฒุฑุณุงู ููุฑ ููฺฏุงู ุฑุงูโุงูุฏุงุฒ

ููฺฏุงู ฺฉู ุจูโุฑูุฒุฑุณุงู ูพุฏุง ุดูุฏุ ูุงู ุจุงูุฑ ุฏุงูููุฏุ ุจุง ฺฺฉโุณุงู SHA-256 ุชุฃุฏุ ู ุณุฑูุณ ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ุงุฒ ุทุฑู systemd ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ูโุดูุฏ.

**ูพุฑูฺฉุณ HTTP/HTTPS ุจุฑุง ุจูโุฑูุฒุฑุณุงูโูุง:** ุงฺฏุฑ ุณุฑูุฑ ุง ฺฉูุงูุช ุดูุง ุจุฑุง ุฏุณุชุฑุณ ุจู GitHub ุฌูุช ุจูโุฑูุฒุฑุณุงู ุฎูุฏฺฉุงุฑ ูุงุฒ ุจู ูพุฑูฺฉุณ ุฏุงุฑุฏุ ุงู ฺฏุฒููโูุง ุฑุง ุจู ุจุฎุด `[server]` ุงุถุงูู ฺฉูุฏ:

```toml
update_http_proxy="http://127.0.0.1:8080"
update_https_proxy="http://127.0.0.1:8080"
```

ุงู ุชูุธูุงุช ูพุฑูฺฉุณ **ููุท ุจุฑ ุฏุงูููุฏูุง ุจูโุฑูุฒุฑุณุงู ุฎูุฏฺฉุงุฑ** ุงุฒ GitHub ุชุฃุซุฑ ูโฺฏุฐุงุฑูุฏ ู ุจุฑ ุชุฑุงูฺฉ ุชููู ุชุฃุซุฑ ููโฺฏุฐุงุฑูุฏ. ุงฺฏุฑ ูพุฑูฺฉุณ ูุงุฒ ูุณุชุ ุฎุงู ุจฺฏุฐุงุฑุฏ ุง ุญุฐู ฺฉูุฏ.

### ุชูุธู ุนููฺฉุฑุฏ ุจุฑุง ููุฑููุฏ ุจุงูุง

- **`ws_pool_enabled`** (ููุท ุณุฑูุฑุ ูพุดโูุฑุถ: true): ูุนุงูโุณุงุฒ ุงุณุชุฎุฑ ฺูุฏ ุงุชุตุงูู ุจุฑุง ฺฉุงูุด ูุดฺฉู TCP-over-TCP ุชุญุช ุจุงุฑ ุณูฺฏู

- **`ws_pool_children`** (ููุท ุณุฑูุฑุ ูพุดโูุฑุถ: 8): ุญุฏุงฺฉุซุฑ ุงุชุตุงูุงุช WebSocket ููุงุฒ
  - **2-4**: ุงุณุชูุงุฏู ุณุจฺฉ (ฺฉูุชุฑ ุงุฒ ตฐ ุงุชุตุงู ููุฒูุงู)
  - **8**: ูพุดโูุฑุถุ ููุงุณุจ ุจุฑุง ุจุดุชุฑ ุงุณุชูุฑุงุฑูุง
  - **16-32**: ุงุณุชูุงุฏู ุณูฺฏู (ฺูุฏู ฺฉุงุฑุจุฑ ููุฒูุงู)

- **`ws_pool_min`** (ููุท ุณุฑูุฑุ ูพุดโูุฑุถ: 2): ุญุฏุงูู ฺฉุงูุงูโูุง ููุดู ูุชุตูุ ุงุณุชุฎุฑ ุจุฑ ุงุณุงุณ ุจุงุฑ ุจู ุญุฏุงูู ู ุญุฏุงฺฉุซุฑ ููุงุณ ูโุดูุฏ

- **`ws_pool_stripe`** (ููุท ุณุฑูุฑุ ูพุดโูุฑุถ: false): ุชูุฒุน ูพฺฉุชโูุง ุฑู ฺฉุงูุงูโูุง โ ุจู ุฏูู ูุงูพุงุฏุงุฑ ุฒุฑ ุถุนู ุณฺฏูุงู ุบุฑูุนุงู ุงุณุช

- **`udp_enabled`** (ููุท ุณุฑูุฑุ ูพุดโูุฑุถ: true): ฺฏูุด ุฏุงุฏู UDP ุฑู ูพูุฑุชโูุง ุชููู

- **`ws_send_batch_bytes`** (ูุฑ ุฏูุ ูพุดโูุฑุถ: 65536): ุญุฏุงฺฉุซุฑ ุจุงุช ุฏุฑ ูุฑ ูุฑู WebSocket
  - ููุงุฏุฑ ูพุงูโุชุฑ ุชุฃุฎุฑ ุฑุง ุฒุฑ ุจุงุฑ ุณูฺฏู (speedtestุ ูุฏู) ฺฉุงูุด ูโุฏููุฏ
  - **65536 (64KB)**: ูพุดโูุฑุถุ ุจูุชุฑู ุชุนุงุฏู ุจุฑุง ุจุดุชุฑ ููุงุฑุฏ
  - **262144 (256KB)**: ุชูุงู ุนููุงุช ุจุงูุงุชุฑุ ุงูุฒุงุด ุชุฃุฎุฑ ุฒุฑ ุจุงุฑ
  - **16384 (16KB)**: ฺฉูุชุฑู ุชุฃุฎุฑุ ฺฉู ฺฉุงูุด ุชูุงู ุนููุงุช

- **`ping_interval`** ู **`ping_timeout`**: ุจุฑุง ูพุงุฏุงุฑ CloudFlare ุญุงุช ุงุณุช (ูู ุฑู ุณุฑูุฑ ู ูู ฺฉูุงูุช ุชูุธู ฺฉูุฏ)
  - **ุจุฑุง ุชุฃุฎุฑ ฺฉู (< 50ms)**: `ping_interval=10`ุ `ping_timeout=10`
  - **ุจุฑุง ุชุฃุฎุฑ ุฒุงุฏ (> 200msุ CloudFlare)**: `ping_interval=30`ุ `ping_timeout=60`
  - ุชุงูโุงูุชโูุง ุชูุงุฌู (< 15 ุซุงูู) ุจุงุนุซ ุงุชุตุงู ูุฌุฏุฏ ูุฏุงูู ุฑู ููฺฉโูุง WAN ุจุง ุชุฃุฎุฑ ุฒุงุฏ ูโุดููุฏ
  - CloudFlare ุชุฃุฎุฑ 5-500ms ุงุถุงูู ูโฺฉูุฏ ู ุชุงูโุงูุช ุจฺฉุงุฑ 100 ุซุงูู ุฏุงุฑุฏุ ุจูุงุจุฑุงู ูุงุตูู ูพูฺฏ 30 ุซุงูู ุชูุตู ูโุดูุฏ

## ฺฏุฒููโูุง ูพุฑูุชฺฉู

ฺฏูุณุชโูุงุฑ ุงุฒ ุณู ูพุฑูุชฺฉู ุงูุชูุงู ูพุดุชุจุงู ูโฺฉูุฏุ ูุฑ ฺฉุฏุงู ุจุง ูุนุงููุงุช ูุชูุงูุช:

### ูพุฑูุชฺฉู WebSocket (protocol="websocket") - ูพุดโูุฑุถ

ุจูุชุฑู ุจุฑุง: CloudFlareุ ุงุณุชูุงุฏู ุนูููุ ุญุฏุงฺฉุซุฑ ุณุงุฒฺฏุงุฑ

- โ ุจุง CloudFlare ฺฉุงุฑ ูโฺฉูุฏ (ูุงุฒ ุจู ูุนุงู ุจูุฏู WebSockets ุฏุงุฑุฏ)

- โ ุงุจุฒุงุฑูุง ุงุดฺฉุงูโุฒุฏุง ูุจุชู ุจุฑ ูุฑูุฑฺฏุฑ ุณุงุฏู ุฏุฑ ุฏุณุชุฑุณ ุงุณุช

- โ ุจู ุทูุฑ ฺฏุณุชุฑุฏูโุง ุชูุณุท ูพุฑูฺฉุณโูุง ู ููุฏ ุจุงูุงูุณุฑูุง ูพุดุชุจุงู ูโุดูุฏ

- โ ูพุฑูฺฉุณโูุง ููุท HTTP/2 ููฺฉู ุงุณุช ุงุฑุชูุง WebSocket ุฑุง ูุณุฏูุฏ ฺฉููุฏ (ุจุงุนุซ HTTP 426 ูโุดูุฏ)

- โ ูุงุฒ ุจู ูุฏุฑุช ูุฏุฑ Upgrade ูฺู ุฏุฑ nginx ุฏุงุฑุฏ

**ุชูุธูุงุช:**
```toml
[server]
protocol="websocket"
url="wss://tunnel.example.com/ws"
```

### ูพุฑูุชฺฉู HTTP/2 (protocol="http2") - ุงุชุตุงู ูุณุชูู

ุจูุชุฑู ุจุฑุง: ุงุชุตุงูุงุช ูุณุชูู ุจุฏูู CloudFlareุ ุฑุงูโุงูุฏุงุฒ ูพุฑูฺฉุณ ุณูุงุฑุด

- โ ุฌุฑุงูโูุง ุจูู HTTP/2 (ุจุฏูู ุฏุณุชฺฉุด WebSocket)

- โ ุงุจุฒุงุฑูุง ุงุดฺฉุงูโุฒุฏุง ูพุฑูุชฺฉู ุณุงุฏู ุฏุฑ ุฏุณุชุฑุณ ุงุณุช

- โ ุจุฏูู ุณุฑุจุงุฑ protobuf

- โ **ุณุงุฒฺฏุงุฑ ุจุง CloudFlare ูุณุช** (ุฌุฑุงูโูุง ุฎุงู HTTP/2 ูพุดุชุจุงู ููโุดููุฏ)

- โ ูุงุฒ ุจู ูพุฑูฺฉุณ ุง ุงุชุตุงู ูุณุชูู HTTP/2 ุฏุงุฑุฏ

**ุชูุธูุงุช:**
```toml
[server]
protocol="http2"
url="https://tunnel.example.com/tunnel"
```

**ุชูุธูุงุช nginx:**
```nginx
location /tunnel {
    proxy_pass http://127.0.0.1:8443;
    proxy_http_version 1.1;
    proxy_buffering off;
    proxy_read_timeout 86400s;
}
```

### ูพุฑูุชฺฉู gRPC (protocol="grpc") - ุจูููโุณุงุฒ ุดุฏู ุจุฑุง CloudFlare

ุจูุชุฑู ุจุฑุง: CloudFlare ุจุง gRPC ูุนุงูุ ุณูุงุฑููุง ุนููฺฉุฑุฏ ุจุงูุง

- โ ุณุงุฒฺฏุงุฑ ุจุง CloudFlare (ูุงุฒ ุจู Network โ gRPC ูุนุงู ุฏุงุฑุฏ)

- โ ุจุงูุงุชุฑู ฺฉุงุฑุง ุชูุงู ุนููุงุช (ุณุฑุงูโุณุงุฒ protobuf)

- โ ูููุชูพูฺฉุณูฺฏ ุฌุฑุงู ุฏุงุฎู

- โ ฺฉูุชุฑู ุณุฑุจุงุฑ ูพุฑูุชฺฉู

- โ ูุงุฒ ุจู ุชุบุฑ gRPC CloudFlare ุง ูพุฑูฺฉุณ ุขฺฏุงู ุงุฒ gRPC ุฏุงุฑุฏ

- โ ุงุดฺฉุงูโุฒุฏุง ูพฺุฏูโุชุฑ

**ุชูุธูุงุช:**
```toml
[server]
protocol="grpc"
url="https://tunnel.example.com/tunnel"
```

**ุชูุธูุงุช nginx ุจุฑุง CloudFlare:**
```nginx
location /tunnel {
    grpc_pass grpc://127.0.0.1:8443;
    grpc_set_header Host $host;
    grpc_read_timeout 86400s;
    grpc_send_timeout 86400s;
}
```

**ุฑุงูููุง ุงูุชุฎุงุจ ูพุฑูุชฺฉู:**
- **ุงุฒ WebSocket ุงุณุชูุงุฏู ฺฉูุฏ** ุงฺฏุฑ: ุงุฒ ุทุฑู CloudFlare ุงุฌุฑุง ูโฺฉูุฏ (ุฑุงุฌโุชุฑู ุญุงูุช)ุ ุญุฏุงฺฉุซุฑ ุณุงุฒฺฏุงุฑ ูุงุฒ ุฏุงุฑุฏ
- **ุงุฒ gRPC ุงุณุชูุงุฏู ฺฉูุฏ** ุงฺฏุฑ: ุงุฒ ุทุฑู CloudFlare ุจุง gRPC ูุนุงู ุงุฌุฑุง ูโฺฉูุฏุ ุจูุชุฑู ุนููฺฉุฑุฏ ูโุฎูุงูุฏ
- **ุงุฒ HTTP/2 ุงุณุชูุงุฏู ฺฉูุฏ** ุงฺฏุฑ: ุงุชุตุงู ูุณุชูู ุจุฏูู CloudFlareุ ุฑุงูโุงูุฏุงุฒ ูพุฑูฺฉุณ ุณูุงุฑุด

## ูพฺฉุฑุจูุฏ ูพุฑูฺฉุณ

### nginx (ุฑุงูโุงูุฏุงุฒ ุฏุณุช)

**ุจุฑุง ูพุฑูุชฺฉู WebSocket:**
```nginx
location /ws {
    proxy_pass http://127.0.0.1:8443;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_read_timeout 86400;
    proxy_send_timeout 86400;
    proxy_buffering off;
    proxy_request_buffering off;
    tcp_nodelay on;
}
```

**ุจุฑุง ูพุฑูุชฺฉู HTTP/2:**
```nginx
location /tunnel {
    proxy_pass http://127.0.0.1:8443;
    proxy_http_version 1.1;
    proxy_buffering off;
    proxy_read_timeout 86400s;
}
```

**ุจุฑุง ูพุฑูุชฺฉู gRPC:**
```nginx
location /tunnel {
    grpc_pass grpc://127.0.0.1:8443;
    grpc_set_header Host $host;
    grpc_set_header X-Real-IP $remote_addr;
    grpc_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    grpc_read_timeout 86400s;
    grpc_send_timeout 86400s;
}
```

**ุจุฑุง gRPC ุจุง CloudFlare:**
```nginx
server {
    listen 443 ssl http2;
    server_name tunnel.example.com;

    ssl_certificate /etc/letsencrypt/live/tunnel.example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/tunnel.example.com/privkey.pem;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;

    location /tunnel {
        grpc_pass grpc://127.0.0.1:8443;
        grpc_set_header Host $host;
        grpc_set_header X-Real-IP $remote_addr;
        grpc_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        grpc_read_timeout 86400s;
        grpc_send_timeout 86400s;
    }
}
```

ูฺฉุงุช ููู ุจุฑุง gRPC ุจุง nginx:
- nginx ูุณุฎู 1.13.10+ ุจุฑุง ูพุดุชุจุงู ุงุฒ gRPC ูุงุฒู ุงุณุช
- ุงุฒ `grpc_pass` ุจู ุฌุง `proxy_pass` ุงุณุชูุงุฏู ฺฉูุฏ
- ุงุฒ ุฏุณุชูุฑุงุช ุชุงูโุงูุช `grpc_*` ุจู ุฌุง `proxy_*` ุงุณุชูุงุฏู ฺฉูุฏ
- CloudFlare ูุงุฒ ุจู ูุนุงู ุจูุฏู ุชุบุฑ **Network โ gRPC** ุฏุงุฑุฏ
- ูุณุฑ URL ุจุฑุง gRPC `/tunnel` ุงุณุช (ูู `/ws`)

**ูฺฉุชู:** `proxy_buffering off` ู `proxy_request_buffering off` ุจุฑุง WebSocket ุญุงุช ูุณุชูุฏ - ุจุฏูู ุขูโูุง nginx ูุฑูโูุง ุฑุง ุจุงูุฑ ูโฺฉูุฏ ู ุจุงุนุซ ฺฉุงูุด ฺุดูฺฏุฑ ุชูุงู ุนููุงุช ูโุดูุฏ.

### nginx Proxy Manager (NPM)

**ุจุฑุง ูพุฑูุชฺฉู WebSocket:**
1. ฺฉ Proxy Host ุฌุฏุฏ ุจู `127.0.0.1:8443` ุงุฌุงุฏ ฺฉูุฏ
2. ุชุบุฑ **"Websockets Support"** ุฑุง ุฏุฑ ุชุจ Details ูุนุงู ฺฉูุฏ
3. ุฏุฑ ุชุจ **Advanced**ุ ุงู ุฏุณุชูุฑุงุช ุณูุงุฑุด ุฑุง ุงุถุงูู ฺฉูุฏ:

```nginx
proxy_read_timeout 86400;
proxy_send_timeout 86400;
proxy_buffering off;
proxy_request_buffering off;
tcp_nodelay on;
```

**ุจุฑุง ูพุฑูุชฺฉู HTTP/2 ุง gRPC:**
- ุงุฒ ููุงู ุฏุณุชูุฑุงุช ุชุงูโุงูุช ุงุณุชูุงุฏู ฺฉูุฏ
- ุชุบุฑ "Websockets Support" ุฑุง ูุนุงู **ูฺฉูุฏ**
- ุจุฑุง gRPCุ NPM ุจุงุฏ ุงุฒ ูพุฑูฺฉุณ gRPC ูพุดุชุจุงู ฺฉูุฏ (nginx 1.13.10+)

ุจุฏูู ุงู ุชุงูโุงูุชโูุงุ NPM ุงุชุตุงู ูุฏุงูู ุฑุง ุจุนุฏ ุงุฒ ~60 ุซุงูู ูุทุน ูโฺฉูุฏ.

### CloudFlare

**ุณุงุฒฺฏุงุฑ ูพุฑูุชฺฉู ุจุง CloudFlare:**

| ูพุฑูุชฺฉู | ูพุดุชุจุงู CloudFlare | ูฺฉุงุช |
|---------|---------------------|------|
| WebSocket | โ ุจูู (ุจุง ุชูุธูุงุช) | ูุงุฒ ุจู Network โ WebSockets ON |
| gRPC | โ ุจูู (ุจุง ุชูุธูุงุช) | ูุงุฒ ุจู Network โ gRPC ON |
| HTTP/2 | โ ุฎุฑ | ุณุงุฒฺฏุงุฑ ูุณุช - ุงุฒ ุงุชุตุงู ูุณุชูู ุงุณุชูุงุฏู ฺฉูุฏ |

**ุชูุธูุงุช ุถุฑูุฑ ุฏุงุดุจูุฑุฏ CloudFlare**

ุจุฑุง **ูพุฑูุชฺฉู WebSocket**:
1. **Network โ WebSockets**: ุจุงุฏ ูุนุงู ุจุงุดุฏ (ุจูโุตูุฑุช ูพุดโูุฑุถ ุฎุงููุด ุงุณุช - ุจุงุนุซ ูุทุน ุงุชุตุงู ูโุดูุฏ!)
2. **SSL/TLS โ Overview**: ุฑู **Full (Strict)** ุชูุธู ฺฉูุฏ (ูู "Flexible")
3. **Speed โ Rocket Loader**: ุฎุงููุด ฺฉูุฏ (ุงุชุตุงูุงุช WebSocket ุฑุง ุฎุฑุงุจ ูโฺฉูุฏ)
4. **Speed โ Auto Minify**: ููู ุฑุง ุบุฑูุนุงู ฺฉูุฏ (HTMLุ CSSุ JS)
5. **Speed โ Early Hints**: ุฎุงููุด ฺฉูุฏ

ุจุฑุง **ูพุฑูุชฺฉู gRPC**:
1. **Network โ gRPC**: ุจุงุฏ ูุนุงู ุจุงุดุฏ (ุจูโุตูุฑุช ูพุดโูุฑุถ ุฎุงููุด ุงุณุช)
2. **SSL/TLS โ Overview**: ุฑู **Full (Strict)** ุชูุธู ฺฉูุฏ (ูู "Flexible")
3. **Speed โ Rocket Loader**: ุฎุงููุด ฺฉูุฏ
4. **Speed โ Auto Minify**: ููู ุฑุง ุบุฑูุนุงู ฺฉูุฏ (HTMLุ CSSุ JS)
5. **Speed โ Early Hints**: ุฎุงููุด ฺฉูุฏ

**ุชูุธูุงุช ฺฉูุงูุช ุจุฑุง CloudFlare:**

ุณุทุญ ุฑุงฺฏุงู CloudFlare ุชุงูโุงูุช ุจฺฉุงุฑ 100 ุซุงูู ู **ูุญุฏูุฏุช ุณุฎุช ุงุชุตุงู 30 ุฏูููโุง** ุฏุงุฑุฏ. ุงุชุตุงู ูุฌุฏุฏ ูพุดฺฏุฑุงูู ุฑุง ูุนุงู ฺฉูุฏ:

```toml
[cloudflare]
enabled=true
max_connection_time=1740  # 29 ุฏููู - ูุจู ุงุฒ ูุญุฏูุฏุช 30 ุฏููู ุงุชุตุงู ูุฌุฏุฏ ุจุฑูุฑุงุฑ ฺฉู
```

ุจุง `enabled=true` ู `ips`/`host` ุฎุงูุ ุงูุชุฎุงุจ IP ูุงุฏุฏู ฺฏุฑูุชู ูโุดูุฏ ุงูุง ุงุชุตุงู ูุฌุฏุฏ ูพุดฺฏุฑุงูู ููฺูุงู ุงุนูุงู ูโุดูุฏ.

## ูุฏุฑุช systemd

### ุณุฑูุฑ:

```bash
sudo systemctl start ghostwire-server
sudo systemctl stop ghostwire-server
sudo systemctl restart ghostwire-server
sudo systemctl status ghostwire-server
sudo journalctl -u ghostwire-server -f
```

### ฺฉูุงูุช:

```bash
sudo systemctl start ghostwire-client
sudo systemctl stop ghostwire-client
sudo systemctl restart ghostwire-client
sudo systemctl status ghostwire-client
sudo journalctl -u ghostwire-client -f
```

## ุณุงุฎุช ุงุฒ ุณูุฑุณ

```bash
pip install -r requirements.txt
cd build
chmod +x build.sh
./build.sh
```

ูุงูโูุง ุจุงูุฑ ุฏุฑ ูพูุดู `dist/` ุงุฌุงุฏ ูโุดููุฏ.

## ูุฌูุฒ

MIT License - ุฌุฒุฆุงุช ุฏุฑ ูุงู LICENSE

## ูุดุงุฑฺฉุช

ูุดุงุฑฺฉุชโูุง ุฎูุดโุขูุฏ ูุณุชูุฏ! ูุทูุงู ฺฉ issue ุจุงุฒ ฺฉูุฏ ุง ฺฉ pull request ุงุฑุณุงู ฺฉูุฏ.

## ูพุดุชุจุงู

ุจุฑุง ูุดฺฉูุงุช ู ุณุคุงูุงุชุ ูุทูุงู ฺฉ issue ุฏุฑ GitHub ุจุงุฒ ฺฉูุฏ.
